(()=>{"use strict";const e=(()=>{function e(e){"hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"}function n(e){"display-none"===e.classList[0]?e.classList="add-cancel-project-container":e.classList="display-none"}return{projectToElment:function(e){let n=e,r=document.createElement("div");r.className="project";let i=document.createElement("p");i.textContent=n.getTitle();let l=document.createElement("span");l.textContent="x",l.onclick=function(){let e=n.getTitle();alert("project "+e),t.deleteElementFromSideBar(r),o.deleteProject(e)},r.appendChild(i),r.appendChild(l),function(e){t.addElementToSideBar(e)}(r)},_initAddBtn:function(){let e=document.querySelector("#add-btn");return e.onclick=function(){let e=t.getInputForm();""!==e.value?(l.newProject(e.value),e.value=""):alert("name cannot be empty")},e},_initCancelBtn:function(){let o=document.querySelector("#cancel-btn");return o.onclick=function(){e(t.getProjectBtn()),n(t.getPopUpForm()),t.getInputForm().value=""},o},_initForm:function(){return document.querySelector("#new-project-name")},_initMenuItem:function(){let e=document.querySelector(".menu-icon");return e.onclick=function(){var e;"side-bar"===(e=t.getSideBar()).classList[0]?e.classList="display-none":e.classList="side-bar"},e},_initProjectBtn:function(){let o=document.querySelector("#add-project-btn");return o.onclick=function(){e(o),n(t.getPopUpForm())},o},_initSideBar:function(){return document.querySelector("#sidebar")},_initNewProjectForm:function(){return document.querySelector("#popup-form")},errorAlret:function(e){alert(e)}}})(),t=(()=>{const t=e._initSideBar(),n=(e._initMenuItem(),e._initProjectBtn()),o=(e._initAddBtn(),e._initCancelBtn(),e._initForm(),e._initNewProjectForm()),r=document.querySelector("#new-project-name");return{addElementToSideBar:function(e){t.insertBefore(e,n)},deleteElementFromSideBar:function(e){t.removeChild(e)},getSideBar:function(){return t},getPopUpForm:function(){return o},getProjectBtn:function(){return n},getInputForm:function(){return r}}})(),n=(()=>{function e(e){let t={title:"",desc:"",date:"",prio:""};return t.title=e.getTitle(),t.desc=e.getDesc(),t.date=e.getDate(),t.prio=e.getPrio(),t}return{projectToObject:function(t){let n=t.getTaskArr(),o=n.length;for(let t=0;t<o;t++)n[t]=e(n[t]);return{title:t.getTitle(),toDoArr:n}},objectToProject:function(e){if(null===e)return void console.log("object empty");let t=e;console.log("todoarr "+t.toDoArr.length);let n=t.toDoArr.length,o=[];if(n>0){o=t.toDoArr;for(let e=0;e<n;e++)o[e]=(r=o[e],c.newTask(r.title,r.desc,r.date,r.prio))}var r;return l.newProject(t.title,t.toDoArr)}}})(),o={saveProject:function(e){let t=e;localStorage.setItem(t.getTitle(),JSON.stringify(n.projectToObject(t)))},getProject:function(e){return n.objectToProject(JSON.parse(localStorage.getItem(e)))},saveFlag:function(e,t){localStorage.setItem(e,t)},getFlag:function(e){return JSON.parse(localStorage.getItem(e))},deleteProject:function(e){if("defualt"===e)return o.saveFlag("defualtFlag",!0),void localStorage.removeItem("defualt");localStorage.removeItem(e)}},r=function(){let t=localStorage.length;for(var o=0;o<t;o++){let t=JSON.parse(localStorage.getItem(localStorage.key(o)));if("object"==typeof t&&"defualt"!==t.title){console.log(t);let o=n.objectToProject(t);e.projectToElment(o)}}},i=(e,t=[])=>({getTitle:()=>e,getTaskArr:()=>t,setTitle(t){e=t}}),l={newProject:function(t,n){return void 0===n&&function(t){if(function(t){return null===localStorage.getItem(t)?(console.log("in true"),!0):(e.errorAlret("a project with this name already exists"),!1)}(t)){let n=i(t);o.saveProject(n),e.projectToElment(n)}}(t),i(t,n)},addTask:function(e,t){e.getTaskArr().push(t)},deleteTask:function(e,t){let n=e.toDoArr.length,o=e.toDoArr.slice(0,n),r=o.indexOf(t);o.splice(r,1),e.toDoArr=o}},c={newTask:function(e,t,n,o){return((e,t,n,o=1)=>({getTitle:()=>e,getDesc:()=>t,getDate:()=>n,getPrio:()=>o,setTitle(t){e=t},setDesc(e){t=e},setDate(e){n=e},setPrio(e){o=e}}))(e,t,n,o)}};var a,u;a=o.getFlag("defualtFlag"),void 0!==(u=o.getProject("defualt"))||!0!==a&&void 0!==a?a&&e.projectToElment(u):(o.saveProject(function(){let e=l.newProject("defualt",[]);return l.addTask(e,c.newTask("defualt","this is a defualt task","31/3/2021",5)),e}()),o.saveFlag("defualtFlag",!0)),r()})();