(()=>{"use strict";const e=(()=>{function e(e){console.log(e.style.visibility),"hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"}function o(e){"display-none"===e.classList[0]?e.classList="add-cancel-project-container":e.classList="display-none"}return{projectToElment:function(e){let o=e,r=document.createElement("div");r.className="project";let l=document.createElement("p");l.textContent=o.getTitle();let i=document.createElement("span");i.textContent="x",i.onclick=function(){let e=o.getTitle();alert("project "+e),t.deleteElementFromSideBar(r),n.deleteProject(e)},r.appendChild(l),r.appendChild(i),function(e){t.addElementToSideBar(e)}(r)},_initAddBtn:function(){let e=document.querySelector("#add-btn");return e.onclick=function(){let e=t.getInputForm().value;l.newProject(e)},e},_initCancelBtn:function(){let n=document.querySelector("#cancel-btn");return n.onclick=function(){e(t.getProjectBtn()),o(t.getPopUpForm())},n},_initForm:function(){return document.querySelector("#new-project-name")},_initMenuItem:function(){let e=document.querySelector(".menu-icon");return e.onclick=function(){var e;"side-bar"===(e=t.getSideBar()).classList[0]?e.classList="display-none":e.classList="side-bar"},e},_initProjectBtn:function(){let n=document.querySelector("#add-project-btn");return n.onclick=function(){e(n),o(t.getPopUpForm())},n},_initSideBar:function(){return document.querySelector("#sidebar")},_initNewProjectForm:function(){return document.querySelector("#popup-form")}}})(),t=(()=>{const t=e._initSideBar(),o=(e._initMenuItem(),e._initProjectBtn()),n=(e._initAddBtn(),e._initCancelBtn(),e._initForm(),e._initNewProjectForm()),r=document.querySelector("#new-project-name");return{addElementToSideBar:function(e){t.insertBefore(e,o)},deleteElementFromSideBar:function(e){t.removeChild(e)},getSideBar:function(){return t},getPopUpForm:function(){return n},getProjectBtn:function(){return o},getInputForm:function(){return r},errorAlret:function(e){alert(e)}}})(),o=(()=>{function e(e){let t={title:"",desc:"",date:"",prio:""};return t.title=e.getTitle(),t.desc=e.getDesc(),t.date=e.getDate(),t.prio=e.getPrio(),t}return{projectToObject:function(t){let o=t.getTaskArr(),n=o.length;for(let t=0;t<n;t++)o[t]=e(o[t]);return{title:t.getTitle(),toDoArr:o}},objectToProject:function(e){if(null===e)return void console.log("here");let t=e,o=t.toDoArr,n=o.length;for(let e=0;e<n;e++)o[e]=(r=o[e],i.newTask(r.title,r.desc,r.date,r.prio));var r;return l.newProject(t.title,t.toDoArr)}}})(),n=(function(){let e=localStorage.length;for(var t=0;t<e;t++){let e=localStorage.getItem(localStorage.key(t));"true"!==e&&"false"!==e&&(console.log("from storage"),console.log(e))}}(),{saveProject:function(e){let t=e;localStorage.setItem(t.getTitle(),JSON.stringify(o.projectToObject(t)))},getProject:function(e){return o.objectToProject(JSON.parse(localStorage.getItem(e)))},saveFlag:function(e,t){localStorage.setItem(e,t)},getFlag:function(e){let t=localStorage.getItem(e);return console.log("flag "+t),"true"===t||null===t},deleteProject:function(e){if("defualt"===e)return n.saveFlag("defualtFlag",!0),void localStorage.removeItem("defualt");localStorage.removeItem(e)}}),r=(function(){let e=localStorage.length,t="";console.log("in storage "+typeof t+"  "+e);for(var o=0;o<e;o++)t=localStorage.key(o),console.log("in storage "+typeof t),console.log(t)}(),(e,t=[])=>({getTitle:()=>e,getTaskArr:()=>t,setTitle(t){e=t}})),l={newProject:function(t,o){return void 0===o&&function(t){if(function(e){return n.getProject(e)?(console.log("there already is such an item"),!1):(console.log("new item"),!0)}(t)){let o=r(t);n.saveProject(o),e.projectToElment(o)}}(t),r(t,o)},addTask:function(e,t){e.getTaskArr().push(t)},deleteTask:function(e,t){let o=e.toDoArr.length,n=e.toDoArr.slice(0,o),r=n.indexOf(t);n.splice(r,1),e.toDoArr=n}},i={newTask:function(e,t,o,n){return((e,t,o,n=1)=>({getTitle:()=>e,getDesc:()=>t,getDate:()=>o,getPrio:()=>n,setTitle(t){e=t},setDesc(e){t=e},setDate(e){o=e},setPrio(e){n=e}}))(e,t,o,n)}};var c,a;c=n.getFlag("defualtFlag"),a=n.getProject("defualt"),console.log(a),void 0!==a||!0!==c&&void 0!==c?c&&e.projectToElment(a):(console.log("in init of defualt project"),n.saveProject(function(){let e=l.newProject("defualt",[]);return l.addTask(e,i.newTask("defualt","this is a defualt task","31/3/2021",5)),e}()),n.saveFlag("defualtFlag",!0))})();