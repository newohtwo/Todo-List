(()=>{"use strict";const e=(()=>{let n="";function r(e){t.getCurrentProjectName().textContent="project: "+e,n=e}function l(e){t.addTaskToGridContainer(function(e){let r=document.createElement("div");r.classList="task";let l=document.createElement("p");l.classList="task-text",l.textContent=e.getTitle();let i=document.createElement("p");i.classList="task-date",i.textContent=e.getDate();let c=document.createElement("span");return c.onclick=function(){!function(e,n,r){o.deleteTaskFromProject(e,n),t.deleteTaskFromGridContainer(r)}(n,e.getTitle(),r)},c.textContent="X",r.appendChild(l),r.appendChild(i),r.appendChild(c),r}(e))}function a(e){"hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"}function u(e){"display-none"===e.classList[0]?e.classList="add-cancel-project-container":e.classList="display-none"}return{projectToElment:function(e){let i=e,c=document.createElement("div");c.className="project";let a=document.createElement("p");a.textContent=i.getTitle();let u=document.createElement("span");u.textContent="x",c.onclick=function(){n!==i.getTitle()?(t.deleteAllElementsFromGrid(),r(i.getTitle()),function(e){let t=e,n=t.length;for(let e=0;e<n;e++)l(t[e]),console.log(e)}(i.getTaskArr())):console.log("user press on same project do nothing")},u.onclick=function(){let e=i.getTitle();alert("project "+e),t.deleteElementFromSideBar(c),o.deleteProject(e),t.deleteAllElementsFromGrid()},c.appendChild(a),c.appendChild(u),function(e){t.addElementToSideBar(e)}(c)},_initAddBtn:function(){let e=document.querySelector("#add-btn");return e.onclick=function(){let e=t.getInputForm();""!==e.value?(i.newProject(e.value),e.value=""):alert("name cannot be empty")},e},_initCancelBtn:function(){let e=document.querySelector("#cancel-btn");return e.onclick=function(){a(t.getProjectBtn()),u(t.getPopUpForm()),t.getInputForm().value=""},e},_initForm:function(){return document.querySelector("#new-project-name")},_initMenuItem:function(){let e=document.querySelector(".menu-icon");return e.onclick=function(){var e;"side-bar"===(e=t.getSideBar()).classList[0]?e.classList="display-none":e.classList="side-bar"},e},_initProjectBtn:function(){let e=document.querySelector("#add-project-btn");return e.onclick=function(){a(e),u(t.getPopUpForm())},e},_initSideBar:function(){return document.querySelector("#sidebar")},_initNewProjectForm:function(){return document.querySelector("#popup-form")},_initPlusIcon:function(){let e=document.querySelector("#plus-icon");return e.onclick=function(){t.getModal().style.display="block"},e},errorAlret:function(e){alert(e)},_initModalAddBtn:function(){let r=document.querySelector("#modal-add-btn");return r.onclick=function(){!function(){let r=t.getModalTaskForm().value,l=t.getModalTaskDate().value;l=""!==l?l.split("-").reverse().join("-"):"date not given";let i=c.newTask(r,"",l);o.addTaskToProject(n,i),e.tasksToElement(i),t.clearFormValues()}()},r},_initModalCancelBtn:function(){let e=document.querySelector("#modal-cancel-btn");return e.onclick=function(){t.getModal().style.display="none",t.clearFormValues()},e},tasksToElement:l,subTitleOfCurrentProject:r}})(),t=(()=>{const t=e._initSideBar(),n=(e._initMenuItem(),e._initProjectBtn()),o=(e._initAddBtn(),e._initCancelBtn(),e._initForm(),e._initNewProjectForm()),r=document.querySelector("#new-project-name"),l=e._initPlusIcon(),i=(document.querySelector(".main"),document.querySelector("#grid-container")),c=document.querySelector("#project-name"),a=document.querySelector("#myModal"),u=(e._initModalAddBtn(),e._initModalCancelBtn(),document.querySelector("#modal-task-name")),d=document.querySelector("#modal-task-date");return window.onclick=function(e){e.target==a&&(a.style.display="none")},{addElementToSideBar:function(e){t.insertBefore(e,n)},deleteElementFromSideBar:function(e){t.removeChild(e)},getSideBar:function(){return t},getPopUpForm:function(){return o},getProjectBtn:function(){return n},getInputForm:function(){return r},getPlusSign:function(){return l},getModal:function(){return a},getModalTaskForm:function(){return u},getModalTaskDate:function(){return d},addTaskToGridContainer:function(e){i.appendChild(e)},getCurrentProjectName:function(){return c},clearFormValues:function(){u.value="",d.value=""},deleteTaskFromGridContainer:function(e){i.removeChild(e)},deleteAllElementsFromGrid:function(){for(;i.lastElementChild;)i.removeChild(i.lastElementChild)}}})(),n=(()=>{function e(e){let t={title:"",desc:"",date:"",prio:""};return t.title=e.getTitle(),t.desc=e.getDesc(),t.date=e.getDate(),t.prio=e.getPrio(),t}return{projectToObject:function(t){let n=t.getTaskArr(),o=n.length;for(let t=0;t<o;t++)n[t]=e(n[t]);return{title:t.getTitle(),toDoArr:n}},objectToProject:function(e){if(null===e)return void console.log("object empty");let t=e,n=t.toDoArr.length,o=[];if(n>0){o=t.toDoArr;for(let e=0;e<n;e++)o[e]=(r=o[e],c.newTask(r.title,r.desc,r.date,r.prio))}var r;return i.newProject(t.title,t.toDoArr)}}})(),o=(()=>{function e(e){let t=e;localStorage.setItem(t.getTitle(),JSON.stringify(n.projectToObject(t)))}function t(e){return n.objectToProject(JSON.parse(localStorage.getItem(e)))}return{saveProject:e,getProject:t,saveFlag:function(e,t){localStorage.setItem(e,t)},getFlag:function(e){return JSON.parse(localStorage.getItem(e))},deleteProject:function(e){if("defualt"===e)return o.saveFlag("defualtFlag",!0),void localStorage.removeItem("defualt");localStorage.removeItem(e)},addTaskToProject:function(n,o){let r=t(n);i.addTask(r,o),e(r)},deleteTaskFromProject:function(n,o){let r=t(n);i.deleteTask(r,o),e(r)}}})(),r=function(){let t=localStorage.length;for(var o=0;o<t;o++){let t=JSON.parse(localStorage.getItem(localStorage.key(o)));if("object"==typeof t&&"defualt"!==t.title){let o=n.objectToProject(t);e.projectToElment(o);let r=o.getTaskArr(),l=r.length;for(let t=0;t<l;t++)e.tasksToElement(r[t]);return void e.subTitleOfCurrentProject(o.getTitle())}}},l=(e,t=[])=>({getTitle:()=>e,getTaskArr:()=>t,setTitle(t){e=t},setTaskArr(e){t=e}}),i={newProject:function(t,n){return void 0===n&&function(t){if(function(t){return null===localStorage.getItem(t)?(console.log("in true"),!0):(e.errorAlret("a project with this name already exists"),!1)}(t)){let n=l(t);o.saveProject(n),e.projectToElment(n)}}(t),l(t,n)},addTask:function(e,t){e.getTaskArr().push(t)},deleteTask:function(e,t){let n=e.getTaskArr().length,o=e.getTaskArr();for(let e=0;e<n;e++)if(o[e].getTitle()===t){o.splice(e,1);break}e.setTaskArr(o)}},c={newTask:function(e,t,n,o){return((e,t="",n,o=1)=>({getTitle:()=>e,getDesc:()=>t,getDate:()=>n,getPrio:()=>o,setTitle(t){e=t},setDesc(e){t=e},setDate(e){n=e},setPrio(e){o=e}}))(e,t,n,o)}};var a,u;a=o.getFlag("defualtFlag"),void 0!==(u=o.getProject("defualt"))||!0!==a&&void 0!==a?a&&e.projectToElment(u):(o.saveProject(function(){let e=i.newProject("defualt",[]);return i.addTask(e,c.newTask("defualt","this is a defualt task","31/3/2021",5)),e}()),o.saveFlag("defualtFlag",!0)),r();let d=[1,2,3,4,5,6],s=d.length,m=d.slice(0,s);console.log(m)})();